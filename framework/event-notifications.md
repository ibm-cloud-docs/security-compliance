---

copyright:
  years: 2020, 2023
lastupdated: "2023-10-10"

keywords: event notifications for {[scc]}, event notifications integration for {[scc]}, alerts for {[scc]}

subcollection: security-compliance

---

{{site.data.keyword.attribute-definition-list}}

# Enabling event notifications for {[scc]}
{: #event-notifications}

As an administrator of {[scc-full]}, you might want to send notifications of events in {[scc]} to other users, or human destinations, by using email, SMS, or other supported delivery channels. Additionally, you might want to send these notifications of events to other applications to build logic by using event-driven programming that uses webhooks, for example. This action is made possible by the integration between {[scc]} and {{site.data.keyword.en_full}}.
{: shortdesc}

## Events for {[scc]}
{: #event-notifications-list}

Review the following sections to learn about the events that are generated by specific {[scc]} components.

| Event type    | Subtype | Description   |
|:--------------|:---------------|:--------------|
| `com.ibm.cloud.compliance.test` |  | An event is sent when you test the connection between {[scc]} and a connected {[en]} service instance. |
| `com.ibm.cloud.compliance.posture` | `posture-scan-completed` | An event is sent when a scan is complete. |
| `com.ibm.cloud.compliance.posture` | `posture-scan-failure-threshold-limit-exceeds` | An event is sent when your specified threshold of failed controls is met. |
| `com.ibm.cloud.compliance.posture` | `posture-scan-new-resource-in-inventory` | An event is sent when a new resource is found in your inventory. |
{: caption="Table 1. List of events that apply to {[scc]}" caption-side="top"}




## Enabling notifications
{: #event-notifications-enable}

Events that are generated by the {[scc]} can be forwarded to an {[en]} service instance that is available in the same account. To get started, be sure that you have:

- [**Administrator** platform access]({[link]}-access-management) for {[scc]}.
- [**Manager** service access](/docs/event-notifications?topic=event-notifications-service-access-management) for the {[en]} service. To view an existing {[en]} service instance in your account, you also need **Viewer** platform access or higher.

### Connecting to {[en]} in the console
{: #event-notifications-enable-ui}
{: ui}

Before you can enable notifications for {[scc]}, be sure that you have an [{[en]} service instance](/catalog/services/event-notifications){: external} that is in the same account. Then, you can use the **Settings > Event Notifications** section in the {[scc]} UI to connect the services.

![The image shows the {[en]} screen in the Security and Compliance Center UI.](../images/event-notifications.svg){: caption="Figure 1. Connecting to {[en]}" caption-side="bottom"}

1. In the console, click the **Menu** icon ![Menu icon](../../icons/icon_hamburger.svg) **> Security and Compliance**.
2. In the {[scc]} navigation, click **Settings**.
3. In the {[en]} section, and click **Connect**.
4. In the side panel, review the source details for the connection. Optionally, provide a description.
5. Select the resource group and {[en]} service instance that you want to connect.

    If an IAM authorization between {[scc]} and {[en]} doesn't exist in your account, a dialog is displayed. Follow the prompts to grant access between the services.

    1. To grant access between {[scc]} and {[en]}, click **Authorize**.
    2. In the side panel, select **{[en]}** as the target service.
    3. From the list of instances, select the {[en]} service instance that you want to authorize.
    4. Select the **Event Source Manager** role.
    5. Click **Review**.
    6. Click **Assign**.

6. To confirm the connection, click **Connect**.

   A success message is displayed to indicate that {[scc]} is now connected to {[en]}. If you need to disconnect from {[en]} later, you can use the options menu ![options icon](../../icons/actions-icon-vertical.svg) **> Disconnect** to remove the {[scc]} as a source service in the {[en]} instance.

   If you choose to disconnect {[en]}, do not delete the IAM authorization between {[scc]} and {[en]}. The {[scc]} uses the existing authorization to unregister from {[en]}. If an {[en]} instance is deleted, any authorizations that exist between the service and {[scc]} are also deleted by IAM.
   {: important}


### Connecting to {[en]} with the API
{: #event-notifications-enable-api}
{: api}

Before you can enable notifications for {[scc]}, be sure that you have an [{[en]} service instance](/catalog/services/event-notifications){: external} that is in the same account. Then, you can connect to {[en]} programmatically by calling the {[scc]} API.

The following example shows a query that you can use to register your {[scc]} source details with {[en]}. 
{: curl}

You can find the `event_notifications_instance_crn` value in the console by going to the **Resource list** and clicking the {[en]} instance row.
{: tip}


```bash
curl -X PATCH 
  --location --header "Authorization: Bearer {IAM_token}" 
  --header "Accept: application/json" 
  --header "Content-Type: application/json-patch+json" 
  --data '{ 
            "event_notifications": { 
              "instance_crn": "crn:v1:staging:public:event-notifications:us-south:a/130003ea8bfa43c5aacea07a86da3000:1c858449-3537-45b8-9d39-2707115b4cc7::" 
              }, 
            "object_storage": { 
              "instance_crn": "crn:v1:staging:public:cloud-object-storage:global:a/130003ea8bfa43c5aacea07a86da3000:1c858449-3537-45b8-9d39-2707115b4cc7::", 
              "bucket": "scc-bucket" 
            } 
          }' "
  https://us-south.compliance.cloud.ibm.com/instances/{instance_id}/v3/settings"
```
{: pre}
{: curl}


```go
eventNotificationsModel := &securityandcompliancecenterapiv3.EventNotifications{
  InstanceCrn: &eventNotificationsCrnForUpdateSettingsLink,
  SourceDescription: core.StringPtr("This source is used for integration with IBM Cloud Security and Compliance Center."),
  SourceName: core.StringPtr("compliance"),
}

objectStorageModel := &securityandcompliancecenterapiv3.ObjectStorage{
  InstanceCrn: &objectStorageCrnForUpdateSettingsLink,
  Bucket: &objectStorageBucketForUpdateSettingsLink,
  BucketLocation: &objectStorageLocationForUpdateSettingsLink,
}

updateSettingsOptions := securityAndComplianceCenterApiService.NewUpdateSettingsOptions()
updateSettingsOptions.SetEventNotifications(eventNotificationsModel)
updateSettingsOptions.SetObjectStorage(objectStorageModel)
updateSettingsOptions.SetXCorrelationID("1a2b3c4d-5e6f-4a7b-8c9d-e0f1a2b3c4d5")

settings, response, err := securityAndComplianceCenterApiService.UpdateSettings(updateSettingsOptions)
if err != nil {
  panic(err)
}
b, _ := json.MarshalIndent(settings, "", "  ")
fmt.Println(string(b))
```
{: codeblock} 
{: go}



```java
EventNotifications eventNotificationsModel = new EventNotifications.Builder()
  .instanceCrn(eventNotificationsCrnForUpdateSettingsLink)
  .sourceDescription("This source is used for integration with IBM Cloud Security and Compliance Center.")
  .sourceName("compliance")
  .build();
ObjectStorage objectStorageModel = new ObjectStorage.Builder()
  .instanceCrn(objectStorageCrnForUpdateSettingsLink)
  .bucket(objectStorageBucketForUpdateSettingsLink)
  .bucketLocation(objectStorageLocationForUpdateSettingsLink)
  .build();
UpdateSettingsOptions updateSettingsOptions = new UpdateSettingsOptions.Builder()
  .eventNotifications(eventNotificationsModel)
  .objectStorage(objectStorageModel)
  .xCorrelationId(xCorrelationIdLink)
  .build();

Response<Settings> response = securityAndComplianceCenterApiService.updateSettings(updateSettingsOptions).execute();
Settings settings = response.getResult();

System.out.println(settings);
```
{: codeblock}
{: java}



```node
// Request models needed by this operation.

// EventNotifications
const eventNotificationsModel = {
  instance_crn: eventNotificationsCrnForUpdateSettingsLink,
  source_description: 'This source is used for integration with IBM Cloud Security and Compliance Center.',
  source_name: 'compliance',
};

// ObjectStorage
const objectStorageModel = {
  instance_crn: objectStorageCrnForUpdateSettingsLink,
  bucket: objectStorageBucketForUpdateSettingsLink,
  bucket_location: objectStorageLocationForUpdateSettingsLink,
};

const params = {
  eventNotifications: eventNotificationsModel,
  objectStorage: objectStorageModel,
  xCorrelationId: xCorrelationIdLink,
};

let res;
try {
  res = await securityAndComplianceCenterApiService.updateSettings(params);
  console.log(JSON.stringify(res.result, null, 2));
} catch (err) {
  console.warn(err);
}
```
{: codeblock}
{: node}



```python
event_notifications_model = {
  'instance_crn': event_notifications_crn_for_update_settings_link,
  'source_description': 'This source is used for integration with IBM Cloud Security and Compliance Center.',
  'source_name': 'compliance',
}

object_storage_model = {
  'instance_crn': object_storage_crn_for_update_settings_link,
  'bucket': object_storage_bucket_for_update_settings_link,
  'bucket_location': object_storage_location_for_update_settings_link,
}

response = security_and_compliance_center_api_service.update_settings(
  event_notifications=event_notifications_model,
  object_storage=object_storage_model,
  x_correlation_id=x_correlation_id_link,
)
settings = response.get_result()

print(json.dumps(settings, indent=2))
```
{: codeblock}
{: python}



A successful response returns the CRN value of your connected {[en]} and {[cos]} service instances. For more information about the required and optional request parameters, see the [API docs](/apidocs/security-compliance#update-settings).


### Sending a test event to {[en]} from the UI
{: #event-notifications-test-ui}
{: ui}

After you enable notifications for {[scc]}, test your connection to ensure that the events that are generated by {[scc]} are being forwarded to {[en]}.

Before you can send a test {[scc]} event, you must have [topics, destinations, and subscriptions](/docs/event-notifications?topic=event-notifications-en-create-en-topic) created in your {[en]} instance. Be sure that the **Test configuration** event type (`com.ibm.cloud.compliance.test`) is included as a condition in your {[en]} topic.
{: note}

1. In the {[scc]} UI, click **Settings**.
2. In the Event Notifications section, click **Send test event**.

   A success message is displayed to indicate that the test event was forwarded successfully to {[en]}.


### Sending a test event to {[en]} by using the API
{: #event-notifications-test-api}
{: api}

After you enable notifications for {[scc]}, test your connection to ensure that the events that are generated by {[scc]} are being forwarded to {[en]}.

Before you can send a test {[scc]} event, you must have [topics, destinations, and subscriptions](/docs/event-notifications?topic=event-notifications-en-create-en-topic) created in your {[en]} instance. Be sure that the **Test configuration** event type (`com.ibm.cloud.compliance.test`) is included as a condition in your {[en]} topic.
{: note}

The following example shows a query that you can use to send a test event from the {[scc]} to {[en]}. 
{: curl}

```sh
curl -X POST 
  --location --header "Authorization: Bearer {iam_token}" 
  --header "Accept: application/json"
  "https://us-south.compliance.cloud.ibm.com/instances/{instance_id}/v3/test_event"
```
{: codeblock}
{: curl}

```go
(securityAndComplianceCenterApi *SecurityAndComplianceCenterApiV3) PostTestEvent(postTestEventOptions *PostTestEventOptions) (result *TestEvent, response *core.DetailedResponse, err error)
```
{: codeblock}
{: go}


```java
PostTestEventOptions postTestEventOptions = new PostTestEventOptions.Builder()
  .xCorrelationId(xCorrelationIdLink)
  .build();

Response<TestEvent> response = securityAndComplianceCenterApiService.postTestEvent(postTestEventOptions).execute();
TestEvent testEvent = response.getResult();

System.out.println(testEvent);
```
{: codeblock}
{: java}


```node
const params = {
  xCorrelationId: xCorrelationIdLink,
};

let res;
try {
  res = await securityAndComplianceCenterApiService.postTestEvent(params);
  console.log(JSON.stringify(res.result, null, 2));
} catch (err) {
  console.warn(err);
}
```
{: codeblock}
{: node}



```python
response = security_and_compliance_center_api_service.post_test_event(
  x_correlation_id=x_correlation_id_link,
)
test_event = response.get_result()

print(json.dumps(test_event, indent=2))
```
{: codeblock}
{: python}


A successful response returns `{"success": true}` to indicate that a test event was forwarded successfully to your connected {[en]} service instance . For more information, see the [API docs](/apidocs/security-compliance#post-test-event).




## Delivering notifications to select destinations
{: #event-notifications-destinations}

After you enable notifications for {[scc]}, create topics and subscriptions in {[en]} so alerts can be forwarded and delivered to your selected destinations.

For a complete list of supported destinations, see the [{[en]} documentation](/docs/event-notifications?topic=event-notifications-en-destination).
{: tip}

### Email notifications
{: #event-notifications-email}

You can use the [{[cloud]} email service](/docs/event-notifications?topic=event-notifications-en-destinations-email) as a delivery channel for {[scc]} event notifications. [Create an {[en]} subscription](/docs/event-notifications?topic=event-notifications-en-create-en-subscription) between an existing topic and the {[cloud]} email service to forward your alerts to various recipients by email.

An email from {[cloud]} that contains information about a {[scc]} event resembles the following example:

```plaintext
Subject: Validation completed: my-test-validation-scan
Body: The following validation scan was successfully completed in the Security and Compliance Center: my-test-validation-scan. You can view the scan results from the Security and Compliance Center in the console. For more information, check out the docs.
```
{: screen}

To receive detailed information about an event notification in your email, select the **Add notification payload** option when you create an {[en]} subscription. Your email displays the [notification payload details](#event-notifications-payload) that are associated with the event.
{: tip}

### Webhooks
{: #event-notifications-webhook}

You can configure a webhook destination so that the properties of an incoming notification can be used programmatically by an app or service. For more information, check out the [{[en]} documentation](/docs/event-notifications?topic=event-notifications-en-destinations-webhook).

## Notification payload details
{: #event-notifications-payload}

Successful events that are generated by a {[scc]} component contain various fields that help you to identify the source and details of an event.

Event notifications from {[scc]} contain only metadata properties, such as names or identifiers of resources. Sensitive data, for example API keys or passwords, are not included in generated events.
{: note}

The metadata properties that are sent to {[en]} vary depending on the event type and subtype. For example, if an `com.ibm.cloud.compliance.posture:posture-scan-completed` event takes place, {[scc]} sends a notification payload to {[en]} that is similar to the following example.

```json
{
    "action": "Validation completed",
    "summary": "my-test-scan",
    "scope": "my-test-scope",
    "profile": "CIS IBM Foundations Benchmark 1.0.0",
    "start_time": "2021-11-24 13:46:21.672",
    "end_time": "2021-11-24 13:46:21.672"
}
```
{: screen}

Review the following table for more information about event notification properties.

| Property | Description |
| ---- | ---- |
| `action` | The [type of event](#event-notifications-list) that triggered a notification. |
| `summary` |  The name of the validation scan. |
| `scope` | The name of the scope that is associated with the scan.|
| `profile` | The name of the profile that is associated with the scan.|
| `start_time` | The date and time the scan started. |
| `end_time` | The date and time the scan completed. |
{: caption="Table 2. Properties in an event notification payload" caption-side="bottom"}


